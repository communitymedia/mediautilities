apply plugin: 'com.android.library'

android {
	compileSdkVersion 27
	buildToolsVersion '27.0.3'

	defaultConfig {
		//noinspection MinSdkTooLow
		minSdkVersion 9 // we *want* to support low SDK versions (older devices)
		targetSdkVersion 27
		versionCode 15
		versionName '1.5.9'

		// TODO: not yet working - fix
		// ndk {
		//     abiFilters 'armeabi' // 'armeabi-v7a', 'arm64-v8a'
		// }
	}

	compileOptions {
		sourceCompatibility JavaVersion.VERSION_1_7
		targetCompatibility JavaVersion.VERSION_1_7
	}

	buildTypes {
		release {
			minifyEnabled false
			consumerProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-mediautilities.txt'
		}
	}

	// TODO: not yet working - fix
	// externalNativeBuild {
	//     ndkBuild {
	//         path 'src/main/cpp/Android.mk'
	//     }
	// }
}

dependencies {
	// compile files('libs/libopencore-wrapper_armeabi.jar') // no-longer needed - jniLibs are automatically imported

	//noinspection GradleDependency
	compile 'com.android.support:exifinterface:25.4.0'  // need to stick with older library to support SDKs 9 to 13 :-(

	compile 'com.google.code.findbugs:annotations:3.0.1', {
		// Need to exclude these, or build is broken by:
		//   com.android.dex.DexException: Multiple dex files define Ljavax/annotation/CheckForNull
		exclude module: 'jsr305'
		exclude module: 'jcip-annotations'
	}
}
